{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Teren\\\\Documents\\\\GitHub\\\\arbitrage-betting\\\\src\\\\components\\\\functions\\\\renderArbitrageBets.tsx\";\n// src/renderArbitrageBets.tsx\n\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst calculateImpliedProbability = odds => 1 / odds;\nconst checkArbitrage = (homeOdds, awayOdds) => {\n  const homeProb = calculateImpliedProbability(homeOdds);\n  const awayProb = calculateImpliedProbability(awayOdds);\n  return homeProb + awayProb < 1; // Using < 2 to check for arbitrage\n};\nconst extractMarket = (markets, key) => markets.find(m => m.key === key);\nconst isValidSpreadArb = (p1, p2) => {\n  const num1 = Number(p1);\n  const num2 = Number(p2);\n  return num1 === -num2;\n};\nconst isValidTotalArb = (p1, p2) => {\n  const num1 = Number(p1);\n  const num2 = Number(p2);\n  if (isNaN(num1) || isNaN(num2)) return false;\n\n  // For totals, Over and Under can be valid as long as their points are close or within reasonable bounds\n  return num1 <= num2;\n};\nexport const renderArbitrageBets = (games, marketKey) => {\n  const bets = [];\n  games.forEach(game => {\n    game.bookmakers.forEach(b1 => {\n      game.bookmakers.forEach(b2 => {\n        if (b1.key !== b2.key) {\n          const m1 = extractMarket(b1.markets, marketKey);\n          const m2 = extractMarket(b2.markets, marketKey);\n          if (m1 && m2) {\n            const o1 = m1.outcomes.find(o => o.name === 'Over' || o.name === game.home_team); // H2H or Over\n            const o2 = m2.outcomes.find(o => o.name === 'Under' || o.name === game.away_team); // Under or Away Team\n\n            // Add logging here to inspect outcomes\n            console.log(`Checking arbitrage: ${game.home_team} vs ${game.away_team}`);\n            console.log(\"Outcomes: \", m1.outcomes, m2.outcomes);\n            console.log(\"o1: \", o1, \"o2: \", o2);\n            if (o1 && o2 && checkArbitrage(o1.price, o2.price)) {\n              const p1 = o1.point;\n              const p2 = o2.point;\n              const point1 = Number(p1);\n              const point2 = Number(p2);\n              console.log(`Points - o1: ${p1}, o2: ${p2}`);\n              const isValid = p1 !== undefined && p2 !== undefined && (\n              // For totals with o1.point <= o2.point (allowing over and under to match)\n              o1.name === 'Over' && o2.name === 'Under' && point1 <= point2 ||\n              // For spreads with o1.point < 100 (ensure point1 == -point2)\n              point1 < 100 && isValidSpreadArb(point1, point2) ||\n              // For H2H, no points comparison needed\n              o1.name !== 'Over' && o2.name !== 'Under' && o1.point === undefined && o2.point === undefined) || p1 === undefined && p2 === undefined; // Handle H2H arbitrage (no points)\n\n              console.log(`Valid Arbitrage: ${isValid}`);\n              if (isValid) {\n                bets.push(/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    border: '1px solid #ccc',\n                    padding: '1rem',\n                    borderRadius: '8px',\n                    boxShadow: '0 2px 5px rgba(0,0,0,0.1)',\n                    marginBottom: '1rem'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: [game.home_team, \" vs \", game.away_team]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 108,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 108,\n                    columnNumber: 74\n                  }, this), b1.title, \" (Home): \", o1.name, \" @ \", o1.price, p1 !== undefined ? ` (Points: ${p1})` : '', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 65\n                  }, this), b2.title, \" (Away): \", o2.name, \" @ \", o2.price, p2 !== undefined ? ` (Points: ${p2})` : '', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 65\n                  }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                    style: {\n                      color: 'red'\n                    },\n                    children: \"Arbitrage!\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 21\n                  }, this)]\n                }, `${game.home_team}-${game.away_team}-${b1.key}-${b2.key}-${marketKey}-${p1}-${p2}`, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 19\n                }, this));\n              }\n            }\n          }\n        }\n      });\n    });\n  });\n  return bets;\n};","map":{"version":3,"names":["React","jsxDEV","_jsxDEV","calculateImpliedProbability","odds","checkArbitrage","homeOdds","awayOdds","homeProb","awayProb","extractMarket","markets","key","find","m","isValidSpreadArb","p1","p2","num1","Number","num2","isValidTotalArb","isNaN","renderArbitrageBets","games","marketKey","bets","forEach","game","bookmakers","b1","b2","m1","m2","o1","outcomes","o","name","home_team","o2","away_team","console","log","price","point","point1","point2","isValid","undefined","push","style","border","padding","borderRadius","boxShadow","marginBottom","children","fileName","_jsxFileName","lineNumber","columnNumber","title","color"],"sources":["C:/Users/Teren/Documents/GitHub/arbitrage-betting/src/components/functions/renderArbitrageBets.tsx"],"sourcesContent":["// src/renderArbitrageBets.tsx\r\n\r\nimport React, { JSX } from 'react';\r\n\r\nexport interface Outcome {\r\n  name: string;\r\n  price: number;\r\n  point?: number;\r\n}\r\n\r\nexport interface Market {\r\n  key: string;\r\n  outcomes: Outcome[];\r\n}\r\n\r\nexport interface Bookmaker {\r\n  key: string;\r\n  title: string;\r\n  markets: Market[];\r\n}\r\n\r\nexport interface Game {\r\n  home_team: string;\r\n  away_team: string;\r\n  bookmakers: Bookmaker[];\r\n}\r\n\r\nconst calculateImpliedProbability = (odds: number) => 1 / odds;\r\n\r\nconst checkArbitrage = (homeOdds: number, awayOdds: number) => {\r\n  const homeProb = calculateImpliedProbability(homeOdds);\r\n  const awayProb = calculateImpliedProbability(awayOdds);\r\n  return homeProb + awayProb < 1; // Using < 2 to check for arbitrage\r\n};\r\n\r\nconst extractMarket = (markets: Market[], key: string) =>\r\n  markets.find(m => m.key === key);\r\n\r\nconst isValidSpreadArb = (p1: string | number, p2: string | number): boolean => {\r\n  const num1 = Number(p1);\r\n  const num2 = Number(p2);\r\n  return num1 === -num2;\r\n};\r\n\r\nconst isValidTotalArb = (p1: string | number, p2: string | number): boolean => {\r\n  const num1 = Number(p1);\r\n  const num2 = Number(p2);\r\n\r\n  if (isNaN(num1) || isNaN(num2)) return false;\r\n\r\n  // For totals, Over and Under can be valid as long as their points are close or within reasonable bounds\r\n  return num1 <= num2;\r\n};\r\n\r\nexport const renderArbitrageBets = (games: Game[], marketKey: string): JSX.Element[] => {\r\n  const bets: JSX.Element[] = [];\r\n\r\n  games.forEach(game => {\r\n    game.bookmakers.forEach(b1 => {\r\n      game.bookmakers.forEach(b2 => {\r\n        if (b1.key !== b2.key) {\r\n          const m1 = extractMarket(b1.markets, marketKey);\r\n          const m2 = extractMarket(b2.markets, marketKey);\r\n          if (m1 && m2) {\r\n            const o1 = m1.outcomes.find(o => o.name === 'Over' || o.name === game.home_team); // H2H or Over\r\n            const o2 = m2.outcomes.find(o => o.name === 'Under' || o.name === game.away_team); // Under or Away Team\r\n\r\n            // Add logging here to inspect outcomes\r\n            console.log(`Checking arbitrage: ${game.home_team} vs ${game.away_team}`);\r\n            console.log(\"Outcomes: \", m1.outcomes, m2.outcomes);\r\n            console.log(\"o1: \", o1, \"o2: \", o2);\r\n\r\n            if (o1 && o2 && checkArbitrage(o1.price, o2.price)) {\r\n              const p1 = o1.point;\r\n              const p2 = o2.point;\r\n\r\n              const point1 = Number(p1);\r\n              const point2 = Number(p2);\r\n\r\n              console.log(`Points - o1: ${p1}, o2: ${p2}`);\r\n              const isValid =\r\n                (p1 !== undefined && p2 !== undefined &&\r\n                  (\r\n                    // For totals with o1.point <= o2.point (allowing over and under to match)\r\n                    (o1.name === 'Over' && o2.name === 'Under' && point1 <= point2) ||\r\n                    // For spreads with o1.point < 100 (ensure point1 == -point2)\r\n                    (point1 < 100 && isValidSpreadArb(point1, point2)) ||\r\n                    // For H2H, no points comparison needed\r\n                    (o1.name !== 'Over' && o2.name !== 'Under' && o1.point === undefined && o2.point === undefined)\r\n                  )\r\n                ) ||\r\n                (p1 === undefined && p2 === undefined); // Handle H2H arbitrage (no points)\r\n\r\n              console.log(`Valid Arbitrage: ${isValid}`);\r\n\r\n              if (isValid) {\r\n                bets.push(\r\n                  <div\r\n                    key={`${game.home_team}-${game.away_team}-${b1.key}-${b2.key}-${marketKey}-${p1}-${p2}`}\r\n                    style={{\r\n                      border: '1px solid #ccc',\r\n                      padding: '1rem',\r\n                      borderRadius: '8px',\r\n                      boxShadow: '0 2px 5px rgba(0,0,0,0.1)',\r\n                      marginBottom: '1rem',\r\n                    }}\r\n                  >\r\n                    <strong>{game.home_team} vs {game.away_team}</strong><br />\r\n                    {b1.title} (Home): {o1.name} @ {o1.price}\r\n                    {p1 !== undefined ? ` (Points: ${p1})` : ''}<br />\r\n                    {b2.title} (Away): {o2.name} @ {o2.price}\r\n                    {p2 !== undefined ? ` (Points: ${p2})` : ''}<br />\r\n                    <strong style={{ color: 'red' }}>Arbitrage!</strong>\r\n                  </div>\r\n                );\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n  });\r\n\r\n  return bets;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}