{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Box,Heading,Text,Grid,GridItem,Spinner,useColorModeValue}from'@chakra-ui/react';import{fetchGameIds,fetchPlayerPropsPoints}from'../api';import{renderArbitragePoints}from'../components/functions/renderArbitragePoints';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PlayerPropsPoints=()=>{const[playerProps,setPlayerProps]=useState([]);useEffect(()=>{const loadPlayerProps=async()=>{try{const ids=await fetchGameIds();const propPromises=ids.map(id=>fetchPlayerPropsPoints(id));const propsData=await Promise.all(propPromises);setPlayerProps(propsData);}catch(error){console.error('Failed to fetch player props:',error);}};loadPlayerProps();},[]);const renderPlayerProps=game=>{var _game$bookmakers;const playerData={};(_game$bookmakers=game.bookmakers)===null||_game$bookmakers===void 0?void 0:_game$bookmakers.forEach(bookmaker=>{bookmaker.markets.forEach(market=>{if(market.key==='player_points'){market.outcomes.forEach(outcome=>{if(!playerData[outcome.description]){playerData[outcome.description]={};}if(!playerData[outcome.description][bookmaker.title]){playerData[outcome.description][bookmaker.title]={over:null,under:null};}if(outcome.name==='Over'){playerData[outcome.description][bookmaker.title].over={price:outcome.price,points:outcome.point};}else if(outcome.name==='Under'){playerData[outcome.description][bookmaker.title].under={price:outcome.price,points:outcome.point};}});}});});return Object.keys(playerData).map(playerName=>/*#__PURE__*/_jsxs(Box,{mb:4,p:4,bg:\"gray.50\",children:[/*#__PURE__*/_jsx(Heading,{size:\"lg\",mb:2,fontWeight:\"bold\",color:\"teal.500\",children:playerName}),Object.keys(playerData[playerName]).map((bookmakerName,index)=>{var _playerData$playerNam,_playerData$playerNam2,_playerData$playerNam3,_playerData$playerNam4;return/*#__PURE__*/_jsxs(Box,{mb:4,children:[/*#__PURE__*/_jsx(Text,{fontWeight:\"bold\",fontSize:\"lg\",color:\"blue.600\",children:bookmakerName}),/*#__PURE__*/_jsxs(Box,{pl:5,children:[/*#__PURE__*/_jsxs(Text,{mb:2,fontSize:\"sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Over:\"}),\" \",(_playerData$playerNam=playerData[playerName][bookmakerName].over)===null||_playerData$playerNam===void 0?void 0:_playerData$playerNam.price,\" (Points: \",(_playerData$playerNam2=playerData[playerName][bookmakerName].over)===null||_playerData$playerNam2===void 0?void 0:_playerData$playerNam2.points,\")\"]}),/*#__PURE__*/_jsxs(Text,{fontSize:\"sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Under:\"}),\" \",(_playerData$playerNam3=playerData[playerName][bookmakerName].under)===null||_playerData$playerNam3===void 0?void 0:_playerData$playerNam3.price,\" (Points: \",(_playerData$playerNam4=playerData[playerName][bookmakerName].under)===null||_playerData$playerNam4===void 0?void 0:_playerData$playerNam4.points,\")\"]})]})]},index);})]},playerName));};return/*#__PURE__*/_jsxs(Box,{p:4,children:[/*#__PURE__*/_jsx(Heading,{mb:4,children:\"Player Props - Points\"}),/*#__PURE__*/_jsx(Heading,{size:\"md\",mb:2,children:\"Arbitrage\"}),/*#__PURE__*/_jsx(Grid,{templateColumns:\"repeat(1, 1fr)\",gap:4,mb:6,children:renderArbitragePoints(playerProps)?renderArbitragePoints(playerProps):/*#__PURE__*/_jsx(Text,{children:\"No arbitrage opportunities found.\"})}),playerProps.length===0?/*#__PURE__*/_jsx(Spinner,{size:\"xl\",thickness:\"4px\",color:\"teal.500\"}):playerProps.map((game,index)=>/*#__PURE__*/_jsxs(Box,{mb:10,children:[/*#__PURE__*/_jsxs(Heading,{size:\"md\",mb:4,children:[game.home_team,\" vs \",game.away_team]}),/*#__PURE__*/_jsx(Grid,{templateColumns:\"repeat(4, 1fr)\",gap:4,children:renderPlayerProps(game).map((prop,idx)=>/*#__PURE__*/_jsx(GridItem,{p:4,borderWidth:\"1px\",borderRadius:\"md\",bg:useColorModeValue('gray.50','gray.700'),boxShadow:\"sm\",children:prop},idx))})]},index))]});};export default PlayerPropsPoints;","map":{"version":3,"names":["React","useEffect","useState","Box","Heading","Text","Grid","GridItem","Spinner","useColorModeValue","fetchGameIds","fetchPlayerPropsPoints","renderArbitragePoints","jsx","_jsx","jsxs","_jsxs","PlayerPropsPoints","playerProps","setPlayerProps","loadPlayerProps","ids","propPromises","map","id","propsData","Promise","all","error","console","renderPlayerProps","game","_game$bookmakers","playerData","bookmakers","forEach","bookmaker","markets","market","key","outcomes","outcome","description","title","over","under","name","price","points","point","Object","keys","playerName","mb","p","bg","children","size","fontWeight","color","bookmakerName","index","_playerData$playerNam","_playerData$playerNam2","_playerData$playerNam3","_playerData$playerNam4","fontSize","pl","templateColumns","gap","length","thickness","home_team","away_team","prop","idx","borderWidth","borderRadius","boxShadow"],"sources":["C:/Users/Teren/Documents/GitHub/arbitrage-betting/src/pages/playerPropsPoints.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {\r\n  Box,\r\n  Heading,\r\n  Text,\r\n  Grid,\r\n  GridItem,\r\n  Spinner,\r\n  useColorModeValue,\r\n} from '@chakra-ui/react';\r\nimport { fetchGameIds, fetchPlayerPropsPoints } from '../api';\r\nimport { renderArbitragePoints } from '../components/functions/renderArbitragePoints';\r\n\r\nconst PlayerPropsPoints = () => {\r\n  const [playerProps, setPlayerProps] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    const loadPlayerProps = async () => {\r\n      try {\r\n        const ids = await fetchGameIds();\r\n        const propPromises = ids.map((id) => fetchPlayerPropsPoints(id));\r\n        const propsData = await Promise.all(propPromises);\r\n        setPlayerProps(propsData);\r\n      } catch (error) {\r\n        console.error('Failed to fetch player props:', error);\r\n      }\r\n    };\r\n\r\n    loadPlayerProps();\r\n  }, []);\r\n\r\n  const renderPlayerProps = (game: any) => {\r\n    const playerData: { [key: string]: any } = {};\r\n\r\n    game.bookmakers?.forEach((bookmaker: any) => {\r\n      bookmaker.markets.forEach((market: any) => {\r\n        if (market.key === 'player_points') {\r\n          market.outcomes.forEach((outcome: any) => {\r\n            if (!playerData[outcome.description]) {\r\n              playerData[outcome.description] = {};\r\n            }\r\n            if (!playerData[outcome.description][bookmaker.title]) {\r\n              playerData[outcome.description][bookmaker.title] = {\r\n                over: null,\r\n                under: null,\r\n              };\r\n            }\r\n\r\n            if (outcome.name === 'Over') {\r\n              playerData[outcome.description][bookmaker.title].over = {\r\n                price: outcome.price,\r\n                points: outcome.point,\r\n              };\r\n            } else if (outcome.name === 'Under') {\r\n              playerData[outcome.description][bookmaker.title].under = {\r\n                price: outcome.price,\r\n                points: outcome.point,\r\n              };\r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    return Object.keys(playerData).map((playerName) => (\r\n      <Box key={playerName} mb={4} p={4} bg=\"gray.50\">\r\n        <Heading size=\"lg\" mb={2} fontWeight=\"bold\" color=\"teal.500\">\r\n          {playerName}\r\n        </Heading>\r\n        {Object.keys(playerData[playerName]).map((bookmakerName, index) => (\r\n          <Box key={index} mb={4}>\r\n            <Text fontWeight=\"bold\" fontSize=\"lg\" color=\"blue.600\">\r\n              {bookmakerName}\r\n            </Text>\r\n            <Box pl={5}>\r\n              <Text mb={2} fontSize=\"sm\">\r\n                <strong>Over:</strong> {playerData[playerName][bookmakerName].over?.price} (Points: {playerData[playerName][bookmakerName].over?.points})\r\n              </Text>\r\n              <Text fontSize=\"sm\">\r\n                <strong>Under:</strong> {playerData[playerName][bookmakerName].under?.price} (Points: {playerData[playerName][bookmakerName].under?.points})\r\n              </Text>\r\n            </Box>\r\n          </Box>\r\n        ))}\r\n      </Box>\r\n    ));\r\n  };\r\n\r\n  return (\r\n    <Box p={4}>\r\n      <Heading mb={4}>Player Props - Points</Heading>\r\n\r\n      <Heading size=\"md\" mb={2}>\r\n        Arbitrage\r\n      </Heading>\r\n\r\n      <Grid templateColumns=\"repeat(1, 1fr)\" gap={4} mb={6}>\r\n        {renderArbitragePoints(playerProps) ? (\r\n          renderArbitragePoints(playerProps)\r\n        ) : (\r\n          <Text>No arbitrage opportunities found.</Text>\r\n        )}\r\n      </Grid>\r\n\r\n      {playerProps.length === 0 ? (\r\n        <Spinner size=\"xl\" thickness=\"4px\" color=\"teal.500\" />\r\n      ) : (\r\n        playerProps.map((game, index) => (\r\n          <Box key={index} mb={10}>\r\n            <Heading size=\"md\" mb={4}>\r\n              {game.home_team} vs {game.away_team}\r\n            </Heading>\r\n\r\n            <Grid templateColumns=\"repeat(4, 1fr)\" gap={4}>\r\n              {renderPlayerProps(game).map((prop, idx) => (\r\n                <GridItem\r\n                  key={idx}\r\n                  p={4}\r\n                  borderWidth=\"1px\"\r\n                  borderRadius=\"md\"\r\n                  bg={useColorModeValue('gray.50', 'gray.700')}\r\n                  boxShadow=\"sm\"\r\n                >\r\n                  {prop}\r\n                </GridItem>\r\n              ))}\r\n            </Grid>\r\n          </Box>\r\n        ))\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default PlayerPropsPoints;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OACEC,GAAG,CACHC,OAAO,CACPC,IAAI,CACJC,IAAI,CACJC,QAAQ,CACRC,OAAO,CACPC,iBAAiB,KACZ,kBAAkB,CACzB,OAASC,YAAY,CAAEC,sBAAsB,KAAQ,QAAQ,CAC7D,OAASC,qBAAqB,KAAQ,+CAA+C,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtF,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGjB,QAAQ,CAAQ,EAAE,CAAC,CAEzDD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAmB,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAX,YAAY,CAAC,CAAC,CAChC,KAAM,CAAAY,YAAY,CAAGD,GAAG,CAACE,GAAG,CAAEC,EAAE,EAAKb,sBAAsB,CAACa,EAAE,CAAC,CAAC,CAChE,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAACL,YAAY,CAAC,CACjDH,cAAc,CAACM,SAAS,CAAC,CAC3B,CAAE,MAAOG,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACvD,CACF,CAAC,CAEDR,eAAe,CAAC,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAU,iBAAiB,CAAIC,IAAS,EAAK,KAAAC,gBAAA,CACvC,KAAM,CAAAC,UAAkC,CAAG,CAAC,CAAC,CAE7C,CAAAD,gBAAA,CAAAD,IAAI,CAACG,UAAU,UAAAF,gBAAA,iBAAfA,gBAAA,CAAiBG,OAAO,CAAEC,SAAc,EAAK,CAC3CA,SAAS,CAACC,OAAO,CAACF,OAAO,CAAEG,MAAW,EAAK,CACzC,GAAIA,MAAM,CAACC,GAAG,GAAK,eAAe,CAAE,CAClCD,MAAM,CAACE,QAAQ,CAACL,OAAO,CAAEM,OAAY,EAAK,CACxC,GAAI,CAACR,UAAU,CAACQ,OAAO,CAACC,WAAW,CAAC,CAAE,CACpCT,UAAU,CAACQ,OAAO,CAACC,WAAW,CAAC,CAAG,CAAC,CAAC,CACtC,CACA,GAAI,CAACT,UAAU,CAACQ,OAAO,CAACC,WAAW,CAAC,CAACN,SAAS,CAACO,KAAK,CAAC,CAAE,CACrDV,UAAU,CAACQ,OAAO,CAACC,WAAW,CAAC,CAACN,SAAS,CAACO,KAAK,CAAC,CAAG,CACjDC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,IACT,CAAC,CACH,CAEA,GAAIJ,OAAO,CAACK,IAAI,GAAK,MAAM,CAAE,CAC3Bb,UAAU,CAACQ,OAAO,CAACC,WAAW,CAAC,CAACN,SAAS,CAACO,KAAK,CAAC,CAACC,IAAI,CAAG,CACtDG,KAAK,CAAEN,OAAO,CAACM,KAAK,CACpBC,MAAM,CAAEP,OAAO,CAACQ,KAClB,CAAC,CACH,CAAC,IAAM,IAAIR,OAAO,CAACK,IAAI,GAAK,OAAO,CAAE,CACnCb,UAAU,CAACQ,OAAO,CAACC,WAAW,CAAC,CAACN,SAAS,CAACO,KAAK,CAAC,CAACE,KAAK,CAAG,CACvDE,KAAK,CAAEN,OAAO,CAACM,KAAK,CACpBC,MAAM,CAAEP,OAAO,CAACQ,KAClB,CAAC,CACH,CACF,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CACJ,CAAC,CAAC,CAEF,MAAO,CAAAC,MAAM,CAACC,IAAI,CAAClB,UAAU,CAAC,CAACV,GAAG,CAAE6B,UAAU,eAC5CpC,KAAA,CAACb,GAAG,EAAkBkD,EAAE,CAAE,CAAE,CAACC,CAAC,CAAE,CAAE,CAACC,EAAE,CAAC,SAAS,CAAAC,QAAA,eAC7C1C,IAAA,CAACV,OAAO,EAACqD,IAAI,CAAC,IAAI,CAACJ,EAAE,CAAE,CAAE,CAACK,UAAU,CAAC,MAAM,CAACC,KAAK,CAAC,UAAU,CAAAH,QAAA,CACzDJ,UAAU,CACJ,CAAC,CACTF,MAAM,CAACC,IAAI,CAAClB,UAAU,CAACmB,UAAU,CAAC,CAAC,CAAC7B,GAAG,CAAC,CAACqC,aAAa,CAAEC,KAAK,QAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,oBAC5DjD,KAAA,CAACb,GAAG,EAAakD,EAAE,CAAE,CAAE,CAAAG,QAAA,eACrB1C,IAAA,CAACT,IAAI,EAACqD,UAAU,CAAC,MAAM,CAACQ,QAAQ,CAAC,IAAI,CAACP,KAAK,CAAC,UAAU,CAAAH,QAAA,CACnDI,aAAa,CACV,CAAC,cACP5C,KAAA,CAACb,GAAG,EAACgE,EAAE,CAAE,CAAE,CAAAX,QAAA,eACTxC,KAAA,CAACX,IAAI,EAACgD,EAAE,CAAE,CAAE,CAACa,QAAQ,CAAC,IAAI,CAAAV,QAAA,eACxB1C,IAAA,WAAA0C,QAAA,CAAQ,OAAK,CAAQ,CAAC,IAAC,EAAAM,qBAAA,CAAC7B,UAAU,CAACmB,UAAU,CAAC,CAACQ,aAAa,CAAC,CAAChB,IAAI,UAAAkB,qBAAA,iBAA1CA,qBAAA,CAA4Cf,KAAK,CAAC,YAAU,EAAAgB,sBAAA,CAAC9B,UAAU,CAACmB,UAAU,CAAC,CAACQ,aAAa,CAAC,CAAChB,IAAI,UAAAmB,sBAAA,iBAA1CA,sBAAA,CAA4Cf,MAAM,CAAC,GAC1I,EAAM,CAAC,cACPhC,KAAA,CAACX,IAAI,EAAC6D,QAAQ,CAAC,IAAI,CAAAV,QAAA,eACjB1C,IAAA,WAAA0C,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,EAAAQ,sBAAA,CAAC/B,UAAU,CAACmB,UAAU,CAAC,CAACQ,aAAa,CAAC,CAACf,KAAK,UAAAmB,sBAAA,iBAA3CA,sBAAA,CAA6CjB,KAAK,CAAC,YAAU,EAAAkB,sBAAA,CAAChC,UAAU,CAACmB,UAAU,CAAC,CAACQ,aAAa,CAAC,CAACf,KAAK,UAAAoB,sBAAA,iBAA3CA,sBAAA,CAA6CjB,MAAM,CAAC,GAC7I,EAAM,CAAC,EACJ,CAAC,GAXEa,KAYL,CAAC,EACP,CAAC,GAlBMT,UAmBL,CACN,CAAC,CACJ,CAAC,CAED,mBACEpC,KAAA,CAACb,GAAG,EAACmD,CAAC,CAAE,CAAE,CAAAE,QAAA,eACR1C,IAAA,CAACV,OAAO,EAACiD,EAAE,CAAE,CAAE,CAAAG,QAAA,CAAC,uBAAqB,CAAS,CAAC,cAE/C1C,IAAA,CAACV,OAAO,EAACqD,IAAI,CAAC,IAAI,CAACJ,EAAE,CAAE,CAAE,CAAAG,QAAA,CAAC,WAE1B,CAAS,CAAC,cAEV1C,IAAA,CAACR,IAAI,EAAC8D,eAAe,CAAC,gBAAgB,CAACC,GAAG,CAAE,CAAE,CAAChB,EAAE,CAAE,CAAE,CAAAG,QAAA,CAClD5C,qBAAqB,CAACM,WAAW,CAAC,CACjCN,qBAAqB,CAACM,WAAW,CAAC,cAElCJ,IAAA,CAACT,IAAI,EAAAmD,QAAA,CAAC,mCAAiC,CAAM,CAC9C,CACG,CAAC,CAENtC,WAAW,CAACoD,MAAM,GAAK,CAAC,cACvBxD,IAAA,CAACN,OAAO,EAACiD,IAAI,CAAC,IAAI,CAACc,SAAS,CAAC,KAAK,CAACZ,KAAK,CAAC,UAAU,CAAE,CAAC,CAEtDzC,WAAW,CAACK,GAAG,CAAC,CAACQ,IAAI,CAAE8B,KAAK,gBAC1B7C,KAAA,CAACb,GAAG,EAAakD,EAAE,CAAE,EAAG,CAAAG,QAAA,eACtBxC,KAAA,CAACZ,OAAO,EAACqD,IAAI,CAAC,IAAI,CAACJ,EAAE,CAAE,CAAE,CAAAG,QAAA,EACtBzB,IAAI,CAACyC,SAAS,CAAC,MAAI,CAACzC,IAAI,CAAC0C,SAAS,EAC5B,CAAC,cAEV3D,IAAA,CAACR,IAAI,EAAC8D,eAAe,CAAC,gBAAgB,CAACC,GAAG,CAAE,CAAE,CAAAb,QAAA,CAC3C1B,iBAAiB,CAACC,IAAI,CAAC,CAACR,GAAG,CAAC,CAACmD,IAAI,CAAEC,GAAG,gBACrC7D,IAAA,CAACP,QAAQ,EAEP+C,CAAC,CAAE,CAAE,CACLsB,WAAW,CAAC,KAAK,CACjBC,YAAY,CAAC,IAAI,CACjBtB,EAAE,CAAE9C,iBAAiB,CAAC,SAAS,CAAE,UAAU,CAAE,CAC7CqE,SAAS,CAAC,IAAI,CAAAtB,QAAA,CAEbkB,IAAI,EAPAC,GAQG,CACX,CAAC,CACE,CAAC,GAlBCd,KAmBL,CACN,CACF,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAA5C,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}